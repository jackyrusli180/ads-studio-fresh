{% extends "base.html" %}

{% block title %}Create Automated Rule{% endblock %}

{% block breadcrumb %}
    <span>Ads Manager</span> / <span>Automated Rules</span> / <span>Create Rule</span>
{% endblock %}

{% block content %}
<div class="automated-rules-container">
    <div class="card">
        <div class="header-actions">
            <h2>Create Automated Rule</h2>
            <a href="/automated-rules" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Rules
            </a>
        </div>

        <div class="rule-content">
            <form class="rule-form" id="ruleForm">
                <div class="form-section">
                    <h3>Rule Details</h3>
                    <div class="form-group">
                        <label>Rule Name</label>
                        <input type="text" class="form-control" id="ruleName" required>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Apply Rule To</h3>
                    <div class="form-group">
                        <select class="form-control" id="ruleLevel">
                            <option value="campaign">Campaigns</option>
                            <option value="adset">Ad Sets</option>
                            <option value="ad">Ads</option>
                        </select>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Conditions</h3>
                    <div id="conditionsContainer">
                        <div class="condition-group">
                            <div class="condition-row">
                                <select class="form-control" name="metric">
                                    <option value="spend">Spend</option>
                                    <option value="cpc">Cost per Click</option>
                                    <option value="ctr">CTR</option>
                                    <option value="conversions">Conversions</option>
                                </select>
                                <select class="form-control" name="operator">
                                    <option value="greater_than">Greater than</option>
                                    <option value="less_than">Less than</option>
                                    <option value="equals">Equals</option>
                                </select>
                                <input type="number" class="form-control" name="value">
                                <button type="button" class="btn btn-icon remove-condition">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" id="addCondition">
                        <i class="fas fa-plus"></i> Add Condition
                    </button>
                </div>

                <div class="form-section">
                    <h3>Actions</h3>
                    <div class="action-section">
                        <select class="form-control" id="actionType">
                            <option value="turn_off">Turn off ads</option>
                            <option value="adjust_budget">Adjust budget</option>
                            <option value="adjust_bid">Adjust bid</option>
                        </select>
                        <div class="action-value">
                            <!-- Dynamic inputs based on action type -->
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Schedule</h3>
                    <div class="schedule-section">
                        <div class="form-group">
                            <label>Frequency</label>
                            <select class="form-control" id="frequency">
                                <option value="30min">Every 30 minutes</option>
                                <option value="hourly">Hourly</option>
                                <option value="daily">Daily</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Time Range</label>
                            <div class="time-range">
                                <input type="time" class="form-control" id="startTime">
                                <span>to</span>
                                <input type="time" class="form-control" id="endTime">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelRule">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="saveRule">Create Rule</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/automated_rules.css') }}">
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/create_rule.js') }}"></script>
{% endblock %} 